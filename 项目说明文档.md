# é›·é›¨æ–°é—»æœåŠ¡ç«¯é¡¹ç›®è¯´æ˜æ–‡æ¡£

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

é›·é›¨æ–°é—»æœåŠ¡ç«¯æ˜¯ä¸€ä¸ªåŸºäº Nest.js æ¡†æ¶å¼€å‘çš„ Node.js åç«¯æœåŠ¡é¡¹ç›®ï¼Œä¸“é—¨ä¸ºé›·é›¨å¤©æ°”ç›¸å…³çš„æ–°é—»èµ„è®¯æä¾› RESTful API æ¥å£æœåŠ¡ã€‚

## ğŸ—ï¸ é¡¹ç›®ç»“æ„

```
thunderstorm-news-api/
â”œâ”€â”€ src/                          # æºä»£ç ç›®å½•
â”‚   â”œâ”€â”€ app.controller.ts         # åº”ç”¨ä¸»æ§åˆ¶å™¨
â”‚   â”œâ”€â”€ app.controller.spec.ts    # åº”ç”¨ä¸»æ§åˆ¶å™¨æµ‹è¯•æ–‡ä»¶
â”‚   â”œâ”€â”€ app.module.ts             # åº”ç”¨ä¸»æ¨¡å—
â”‚   â”œâ”€â”€ app.service.ts            # åº”ç”¨ä¸»æœåŠ¡
â”‚   â”œâ”€â”€ main.ts                   # åº”ç”¨å…¥å£æ–‡ä»¶
â”‚   â””â”€â”€ news/                     # æ–°é—»æ¨¡å—
â”‚       â”œâ”€â”€ interfaces/           # æ¥å£å®šä¹‰
â”‚       â”‚   â””â”€â”€ news.interface.ts # æ–°é—»æ•°æ®æ¥å£
â”‚       â”œâ”€â”€ news.controller.ts    # æ–°é—»æ§åˆ¶å™¨
â”‚       â”œâ”€â”€ news.service.ts       # æ–°é—»æœåŠ¡
â”‚       â””â”€â”€ news.module.ts        # æ–°é—»æ¨¡å—é…ç½®
â”œâ”€â”€ test/                         # æµ‹è¯•æ–‡ä»¶ç›®å½•
â”‚   â”œâ”€â”€ app.e2e-spec.ts          # ç«¯åˆ°ç«¯æµ‹è¯•
â”‚   â””â”€â”€ jest-e2e.json            # Jest E2E é…ç½®
â”œâ”€â”€ package.json                  # é¡¹ç›®ä¾èµ–é…ç½®
â”œâ”€â”€ tsconfig.json                 # TypeScript é…ç½®
â”œâ”€â”€ tsconfig.build.json           # TypeScript æ„å»ºé…ç½®
â”œâ”€â”€ nest-cli.json                 # Nest CLI é…ç½®
â”œâ”€â”€ eslint.config.mjs             # ESLint é…ç½®
â”œâ”€â”€ .prettierrc                   # Prettier é…ç½®
â”œâ”€â”€ .gitignore                    # Git å¿½ç•¥æ–‡ä»¶
â””â”€â”€ README.md                     # é¡¹ç›®è¯´æ˜
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Node.js >= 16.x
- npm >= 8.x

### å®‰è£…ä¾èµ–

```bash
cd thunderstorm-news-api
npm install
```

### å¯åŠ¨å¼€å‘æœåŠ¡å™¨

```bash
# å¼€å‘æ¨¡å¼ï¼ˆçƒ­é‡è½½ï¼‰
npm run start:dev

# ç”Ÿäº§æ¨¡å¼
npm run start:prod

# è°ƒè¯•æ¨¡å¼
npm run start:debug
```

### æ„å»ºé¡¹ç›®

```bash
npm run build
```

### è¿è¡Œæµ‹è¯•

```bash
# å•å…ƒæµ‹è¯•
npm run test

# ç«¯åˆ°ç«¯æµ‹è¯•
npm run test:e2e

# æµ‹è¯•è¦†ç›–ç‡
npm run test:cov
```

## ğŸ“¡ API æ¥å£è¯´æ˜

### åŸºç¡€ä¿¡æ¯

- **æœåŠ¡åœ°å€**: http://localhost:3000
- **API æ–‡æ¡£**: http://localhost:3000/api-docs
- **æ•°æ®æ ¼å¼**: JSON

### æ–°é—»æ¥å£

#### 1. è·å–æ–°é—»åˆ—è¡¨

```http
GET /news?page=1&limit=10
```

**æŸ¥è¯¢å‚æ•°**:
- `page` (å¯é€‰): é¡µç ï¼Œé»˜è®¤ä¸º 1
- `limit` (å¯é€‰): æ¯é¡µæ•°é‡ï¼Œé»˜è®¤ä¸º 10

**å“åº”ç¤ºä¾‹**:
```json
{
  "data": [
    {
      "id": "1",
      "title": "é›·é›¨å¤©æ°”é¢„è­¦ï¼šæ˜æ—¥å°†æœ‰å¼ºé™é›¨",
      "content": "æ®æ°”è±¡éƒ¨é—¨é¢„æŠ¥ï¼Œæ˜æ—¥å°†æœ‰å¼ºé›·é›¨å¤©æ°”...",
      "author": "æ°”è±¡å°",
      "category": "weather",
      "publishTime": "2024-01-15T10:00:00.000Z",
      "imageUrl": "https://example.com/weather1.jpg",
      "tags": ["å¤©æ°”", "é¢„è­¦", "é›·é›¨"],
      "viewCount": 1250
    }
  ],
  "total": 5,
  "page": 1,
  "limit": 10
}
```

#### 2. è·å–æ–°é—»è¯¦æƒ…

```http
GET /news/:id
```

**è·¯å¾„å‚æ•°**:
- `id`: æ–°é—» ID

**å“åº”ç¤ºä¾‹**:
```json
{
  "id": "1",
  "title": "é›·é›¨å¤©æ°”é¢„è­¦ï¼šæ˜æ—¥å°†æœ‰å¼ºé™é›¨",
  "content": "æ®æ°”è±¡éƒ¨é—¨é¢„æŠ¥ï¼Œæ˜æ—¥å°†æœ‰å¼ºé›·é›¨å¤©æ°”ï¼Œè¯·å¸‚æ°‘æ³¨æ„é˜²èŒƒ...",
  "author": "æ°”è±¡å°",
  "category": "weather",
  "publishTime": "2024-01-15T10:00:00.000Z",
  "imageUrl": "https://example.com/weather1.jpg",
  "tags": ["å¤©æ°”", "é¢„è­¦", "é›·é›¨"],
  "viewCount": 1251
}
```

#### 3. æ ¹æ®åˆ†ç±»è·å–æ–°é—»

```http
GET /news/category/:category?page=1&limit=10
```

**è·¯å¾„å‚æ•°**:
- `category`: æ–°é—»åˆ†ç±»ï¼ˆå¦‚ï¼šweather, government, safety, agriculture, trafficï¼‰

**æŸ¥è¯¢å‚æ•°**:
- `page` (å¯é€‰): é¡µç ï¼Œé»˜è®¤ä¸º 1
- `limit` (å¯é€‰): æ¯é¡µæ•°é‡ï¼Œé»˜è®¤ä¸º 10

## ğŸ—‚ï¸ æ•°æ®æ¨¡å‹

### News æ¥å£

```typescript
interface News {
  id: string;              // æ–°é—»å”¯ä¸€æ ‡è¯†ç¬¦
  title: string;           // æ–°é—»æ ‡é¢˜
  content: string;         // æ–°é—»å†…å®¹
  author: string;          // ä½œè€…
  category: string;        // æ–°é—»åˆ†ç±»
  publishTime: Date;       // å‘å¸ƒæ—¶é—´
  imageUrl?: string;       // æ–°é—»å›¾ç‰‡URLï¼ˆå¯é€‰ï¼‰
  tags: string[];          // æ ‡ç­¾åˆ—è¡¨
  viewCount: number;       // æµè§ˆæ¬¡æ•°
}
```

### æ–°é—»åˆ†ç±»

- `weather`: å¤©æ°”ç›¸å…³
- `government`: æ”¿åºœå…¬å‘Š
- `safety`: å®‰å…¨æŒ‡å—
- `agriculture`: å†œä¸šç›¸å…³
- `traffic`: äº¤é€šä¿¡æ¯

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **æ¡†æ¶**: Nest.js
- **è¯­è¨€**: TypeScript
- **æ–‡æ¡£**: Swagger/OpenAPI
- **æµ‹è¯•**: Jest
- **ä»£ç è§„èŒƒ**: ESLint + Prettier

## ğŸ”§ é…ç½®è¯´æ˜

### CORS é…ç½®

é¡¹ç›®å·²å¯ç”¨ CORS è·¨åŸŸæ”¯æŒï¼Œå…è®¸æ‰€æœ‰æ¥æºçš„è¯·æ±‚ã€‚å¦‚éœ€é™åˆ¶ç‰¹å®šåŸŸåï¼Œå¯åœ¨ `main.ts` ä¸­ä¿®æ”¹ CORS é…ç½®ã€‚

### Swagger æ–‡æ¡£

é¡¹ç›®é›†æˆäº† Swagger API æ–‡æ¡£ï¼Œå¯åŠ¨æœåŠ¡åè®¿é—® `/api-docs` è·¯å¾„å³å¯æŸ¥çœ‹å®Œæ•´çš„ API æ–‡æ¡£å’Œåœ¨çº¿æµ‹è¯•ç•Œé¢ã€‚

## ğŸ“ å¼€å‘æŒ‡å—

### æ·»åŠ æ–°çš„ API æ¥å£

1. åœ¨å¯¹åº”çš„æ§åˆ¶å™¨ä¸­æ·»åŠ æ–°çš„è·¯ç”±æ–¹æ³•
2. åœ¨æœåŠ¡ç±»ä¸­å®ç°ä¸šåŠ¡é€»è¾‘
3. æ·»åŠ å¿…è¦çš„ Swagger è£…é¥°å™¨
4. ç¼–å†™å•å…ƒæµ‹è¯•

### ä»£ç è§„èŒƒ

- ä½¿ç”¨ TypeScript è¿›è¡Œç±»å‹å®‰å…¨å¼€å‘
- ä¸ºæ‰€æœ‰å‡½æ•°æ·»åŠ è¯¦ç»†æ³¨é‡Š
- éµå¾ª Nest.js çš„æ¨¡å—åŒ–æ¶æ„
- ä½¿ç”¨ä¾èµ–æ³¨å…¥æ¨¡å¼

## ğŸš¨ æ³¨æ„äº‹é¡¹

1. å½“å‰ä½¿ç”¨çš„æ˜¯æ¨¡æ‹Ÿæ•°æ®ï¼Œç”Ÿäº§ç¯å¢ƒéœ€è¦è¿æ¥çœŸå®æ•°æ®åº“
2. å»ºè®®åœ¨ç”Ÿäº§ç¯å¢ƒä¸­é…ç½®ç¯å¢ƒå˜é‡ç®¡ç†æ•æ„Ÿä¿¡æ¯
3. éœ€è¦æ ¹æ®å®é™…éœ€æ±‚è°ƒæ•´ CORS ç­–ç•¥
4. å»ºè®®æ·»åŠ èº«ä»½éªŒè¯å’Œæˆæƒæœºåˆ¶

## ğŸ“ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·è”ç³»å¼€å‘å›¢é˜Ÿã€‚

---

*æœ€åæ›´æ–°æ—¶é—´: 2025å¹´7æœˆ*